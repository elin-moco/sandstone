(function(){if($("#nav-main").length===0){return}var a={};a.isMSIEpre9=(function(){return(/MSIE\ (4|5|6|7|8)/.test(navigator.userAgent))})();a.smallMode=false;a.smallMenuOpen=false;a.currentSmallSubmenu=null;a.previousMenuItem=null;a.currentSubmenuItem=null;a.mainMenuItems=null;a.mainMenuLinks=null;a.init=function(){a.mainMenuItems=$("#nav-main .has-submenus > li");a.mainMenuLinks=$('#nav-main ul > li > [tabindex="0"]');a.mainMenuItems.bind("mouseover focusin",a.handleFocusIn).bind("mouseout focusout",a.handleFocusOut).each(a.initSubmenu);if(!a.isMSIEpre9){$(window).resize(a.handleResize);a.handleResize()}$("#nav-main .toggle").click(function(b){b.preventDefault();a.toggleSmallMenu()}).keydown(function(b){if(b.keyCode==13||b.keyCode==32){b.preventDefault();a.toggleSmallMenu()}});if("ontouchstart" in window){a.mainMenuLinks.click(function(b){b.preventDefault();this.focus()})}$("#footer-menu").attr("role","presentation")};a.handleFocusIn=function(c){var b=$(this);if(a.previousMenuItem){if(a.previousMenuItem.attr("id")!==b.attr("id")){a.previousMenuItem.dequeue()}else{a.previousMenuItem.clearQueue()}}b.addClass("hover").find('[aria-expanded="false"]').attr("aria-expanded","true")};a.handleFocusOut=function(b){a.previousMenuItem=$(this);a.previousMenuItem.delay(100).queue(function(){if(a.previousMenuItem){a.previousMenuItem.clearQueue().removeClass("hover").find('[aria-expanded="true"]').attr("aria-expanded","false");a.previousMenuItem=null;if(a.currentSubmenuItem){a.currentSubmenuItem.get(0).blur()}}})};a.initSubmenu=function(b){var c=$(this).find("a");c.mouseover(function(d){this.focus()}).focus(function(){a.currentSubmenuItem=$(this)}).each(function(d){$(this).keydown(function(g){var f;switch(g.keyCode){case 33:case 36:f=c.first();break;case 34:case 35:f=c.last();break;case 38:f=(d>0)?c.eq(d-1):c.last();break;case 40:f=(d<c.length-1)?c.eq(d+1):c.first();break;case 37:f=(b>0)?a.mainMenuLinks.eq(b-1):a.mainMenuLinks.last();break;case 39:f=(b<a.mainMenuLinks.length-1)?a.mainMenuLinks.eq(b+1):a.mainMenuLinks.first();break}if(f){f.get(0).focus();return false}return true})})};a.handleResize=function(){var b=$(window).width();if(b<=760&&!a.smallMode){a.enterSmallMode()}if(b>760&&a.smallMode){a.leaveSmallMode()}};a.enterSmallMode=function(){a.unlinkMainMenuItems();$("#nav-main-menu").css("display","none").attr("aria-hidden");$(document).click(a.handleDocumentClick);$("a, input, textarea, button, :focus").focus(a.handleDocumentFocus);$("#nav-main-menu, #nav-main-menu .submenu").attr("aria-hidden","true");a.mainMenuLinks.addClass("submenu-item").unbind("click",a.handleSubmenuClick);a.linkMenuHideOnClick();a.smallMode=true};a.leaveSmallMode=function(){a.relinkMainMenuLinks();$("#nav-main-menu").css("display","").removeAttr("aria-hidden");$(document).unbind("click",a.handleDocumentClick);$("a, input, textarea, button, :focus").unbind("focus",a.handleDocumentFocus);$("#nav-main .toggle").removeClass("open");$("#nav-main-menu > li > .submenu").stop(true).css({left:"",top:"",display:"",opacity:"",height:"",marginTop:"",marginBottom:""}).attr("aria-expanded","false");a.unlinkMenuHideOnClick();a.currentSmallSubmenu=null;a.smallMode=false;a.smallMenuOpen=false};a.linkMenuHideOnClick=function(){if(a.mainMenuItems.length===0){$("#nav-main-menu > li > a").on("click.smallmode",function(b){a.closeSmallMenu()})}else{$(".submenu > li > a").on("click.smallmode",function(b){a.closeSmallMenu()})}};a.unlinkMenuHideOnClick=function(){if(a.mainMenuItems.length===0){$("#nav-main-menu > li > a").off("click.smallmode")}else{$(".submenu > li > a").of("click.smallmode")}};a.unlinkMainMenuItems=function(){a.mainMenuLinks.each(function(b,d){var c=$(d);if(c.siblings(".submenu")){c.attr("data-old-href",c.attr("href"));c.removeAttr("href")}})};a.relinkMainMenuLinks=function(){a.mainMenuLinks.each(function(b,d){var c=$(d);if(c.attr("data-old-href")){c.attr("href",c.attr("data-old-href"));c.removeAttr("data-old-href")}})};a.handleDocumentClick=function(c){if(a.smallMode){var b=$(c.target);if(!b.parents().is("#nav-main")){a.closeSmallMenu()}}};a.handleDocumentFocus=function(c){var b=$(c.target);if(!b.parents().is("#nav-main")){a.closeSmallMenu()}};a.handleToggleKeypress=function(b){if(b.keyCode==13){a.toggleSmallMenu()}};a.toggleSmallMenu=function(){if(a.smallMenuOpen){a.closeSmallMenu()}else{a.openSmallMenu()}};a.openSmallMenu=function(){if(a.smallMenuOpen){return}$("#nav-main-menu").slideDown(150).removeAttr("aria-hidden");$("#nav-main .toggle").addClass("open");a.mainMenuLinks.addClass("submenu-item").click(a.handleSubmenuClick);$("#nav-main-menu [tabindex=0]").get(0).focus();a.smallMenuOpen=true};a.closeSmallMenu=function(){if(!a.smallMenuOpen){return}$("#nav-main-menu, #nav-main-menu .submenu").slideUp(100).attr("aria-hidden","true");$("#nav-main .toggle").removeClass("open");a.mainMenuLinks.addClass("submenu-item").unbind("click",a.handleSubmenuClick);if(a.currentSmallSubmenu){a.closeSmallSubmenu(a.currentSmallSubmenu)}a.currentSmallSubmenu=null;a.smallMenuOpen=false};a.handleSubmenuClick=function(b){b.preventDefault();var c=$(this).siblings(".submenu");a.openSmallSubmenu(c)};a.openSmallSubmenu=function(b){if(a.currentSmallSubmenu&&a.currentSmallSubmenu.get(0).id!==b.get(0).id){a.closeSmallSubmenu(a.currentSmallSubmenu)}if(a.currentSmallSubmenu&&a.currentSmallSubmenu.get(0).id===b.get(0).id){b.find("a").get(0).focus();return}b.stop(true).css({left:"80px",top:"auto",display:"none",opacity:"1",height:"auto",marginTop:"-8px",marginBottom:"0"}).slideDown(150).attr("aria-expanded","true");b.find("a").get(0).focus();a.currentSmallSubmenu=b};a.closeSmallSubmenu=function(b){b.stop(true).fadeOut(100,function(){b.css({left:"",top:"",display:"",opacity:"",height:"",marginTop:"",marginBottom:""}).attr("aria-expanded","false")})};$(document).ready(a.init)})();var Tabzilla=(function(b){var h="1.7.1";var m;var j;var C;var d;var x=false;var w=("matchMedia" in window);var p=(document.documentMode===9);var A=(typeof console=="object");var n="wide";var q="-1";var i=null;var l;var y=function(){var D=c();if(n!==D){n=D;u()}};var c=function(){if(w&&matchMedia("(max-width: 719px)").matches){return"compact"}return"wide"};var u=function(){if(n==="wide"){e()}else{g()}};var e=function(){f();a();m.focus()};var g=function(){k();r()};var k=function(){j.find(">ul").attr("role","presentation");C.each(function(D){i(this).attr({id:"tab-"+D,"aria-controls":"panel-"+D,tabindex:q,role:"tab","aria-expanded":false})});if(!j.find("h2[tabindex=0]").length){j.find("h2:first").attr("tabindex",0)}j.find("div").each(function(D){i(this).attr({id:"panel-"+D,"aria-labeledby":"tab-"+D,role:"tabpanel"}).css("display","none")})};var f=function(){j.find(">ul").removeAttr("role");C.removeAttr("id aria-controls tabindex role aria-expanded");j.find("div").removeAttr("id aria-labeledby role style")};var r=function(){j.on("click.submenu","h2",function(D){D.preventDefault();var E=i(D.target).next("div");i(D.target).attr("aria-expanded",E.is(":hidden"));E.toggle()});j.on("keydown.submenu",function(D){var F=D.which;var E=i(D.target);if(F===13||F===32){D.preventDefault();E.trigger("click")}if(F===37||F===38){D.preventDefault();C.each(function(G){if(G>0&&i(this).attr("tabindex")===0){i(this).attr("tabindex",q);i(C[G-1]).attr("tabindex",0).focus();return false}})}if(F===40||F===39){D.preventDefault();C.each(function(G){if(G<(C.length-1)&&i(this).attr("tabindex")===0){i(this).attr("tabindex",q);i(C[G+1]).attr("tabindex",0).focus();return false}})}if(F===27&&E.is("a")){D.preventDefault();D.stopPropagation();E.parents("div").prev("h2").trigger("click").focus()}})};var a=function(){j.off(".submenu")};b.open=function(){x=true;m.toggleClass("open");var D=i("#tabzilla-contents").height();m.animate({height:D},200,function(){m.css("height","auto")});d.attr({"aria-expanded":"true"}).addClass("tabzilla-opened").removeClass("tabzilla-closed");m.focus();return m};b.close=function(){x=false;m.animate({height:0},200,function(){m.toggleClass("open")});d.attr({"aria-expanded":"false"}).addClass("tabzilla-closed").removeClass("tabzilla-opened");return d};b.opened=function(){if(A){console.warn("This call is soon going to be deprecated, please replace it with Tabzilla.open() instead.")}return b.open()};b.closed=function(){if(A){console.warn("This call is soon going to be deprecated, please replace it with Tabzilla.close() instead.")}return b.close()};var z=function(){i.extend(i.easing,{easeInOut:function(E,F,D,H,G){if((F/=G/2)<1){return H/2*F*F+D}return -H/2*((--F)*(F-2)-1)+D}})};var o=function(){window.matchMedia=window.matchMedia||(function(H,I){var F;var D=H.documentElement;var E=D.firstElementChild||D.firstChild;var G=H.createElement("body");var J=H.createElement("div");J.id="mq-test-1";J.style.cssText="position:absolute;top:-100em";G.style.background="none";G.appendChild(J);return function(K){J.innerHTML='&shy;<style media="'+K+'"> #mq-test-1 { width: 42px; }</style>';D.insertBefore(G,E);F=J.offsetWidth===42;D.removeChild(G);return{matches:F,media:K}}}(document))};var t=function(){if(0==i("#tabzilla-panel").length){i("body").prepend(s)}d=i("#tabzilla");m=i("#tabzilla-panel");j=i("#tabzilla-nav");C=j.find("h2");if(p&&!w){o();w=true}z();y();i(window).on("resize",function(){y()});m.on("keydown",function(D){if(D.which===27){D.preventDefault();close()}});d.attr("aria-label","Mozilla links");d.on("click",function(D){D.preventDefault();if(x){b.close()}else{b.open()}})};var B=function(F){var E=function(){l=window.jQuery.noConflict(true);i=l;F.call()};var D=document.createElement("script");if(D.readyState){D.onreadystatechange=function(){if(D.readyState==="loaded"||D.readyState==="complete"){D.onreadystatechange=null;E.call()}}}else{D.onload=E}D.src="//mozorg.cdn.mozilla.net/media/js/libs/jquery-"+h+".min.js";document.getElementsByTagName("head")[0].appendChild(D)};var v=function(E,D){E=(""+E).split(".");D=(""+D).split(".");while(E.length<D.length){E.push("0")}while(D.length<E.length){D.push("0")}for(var F=0;F<E.length;F++){if(E[F]>D[F]){return 1}if(E[F]<D[F]){return -1}}return 0};(function(){if(window.jQuery!==undefined&&v(window.jQuery.fn.jquery,h)!==-1){l=window.jQuery;i=l;i(document).ready(t)}else{B(t)}})();var s='<div id="tabzilla-panel" class="close-nav" tabindex="-1">  <div id="tabzilla-contents">    <div id="tabzilla-promo">      <div id="tabzilla-promo-ff-android" class="snippet"> <!--ex: promo-firefox, promo-MWC, promo-flicks -->        <a href="https://play.google.com/store/apps/details?id=org.mozilla.firefox">          <h4>Firefox for Android</h4>          <p>我會說中文了！</p>        </a>      </div>      <!-- end of promo-name -->    </div>    <!-- end of tabzilla-promo -->    <div id="tabzilla-nav">      <ul>        <li class="sitemap">          <h2>Firefox</h2>          <div>            <ul>              <li>                <a href="//mozilla.com.tw/firefox/features/" title="下載 Mozilla Firefox 中文桌面版">Firefox 桌面版</a>              </li>              <li>                <a href="//mozilla.com.tw/firefox/mobile/" title="Mozilla Firefox 行動版">Firefox 行動版</a>              </li>              <li>                <a href="//mozilla.com.tw/firefox/channel/" title="Mozilla Firefox 未來發行版">Firefox 未來發行版</a>              </li>              <li>                <a href="//mozilla.com.tw/firefoxos/" title="Firefox 行動作業系統">Firefox OS</a>              </li>              <li>                <a href="https://addons.mozilla.org/zh-TW/firefox/" title="Firefox 附加元件">附加元件</a>              </li>              <li>                <a href="https://support.mozilla.com/zh-TW/home" title="Firefox 說明文件、支援中心">支援中心</a>              </li>            </ul>          </div>        </li>        <li class="sitemap">          <h2>社群參與</h2>          <div>            <ul>              <li>                <a href="http://firefox.club.tw/" title="Firefox 活力軍">Firefox 活力軍</a>              </li>              <li>                <a href="//mozilla.com.tw/community/student/" title="校園大使">校園大使</a>              </li>              <li>                <a href="//mozilla.com.tw/community/contribute/" title="社群專案">社群專案</a>              </li>            </ul>          </div>        </li>        <li class="sitemap">          <h2>訊息中心</h2>          <div>            <ul>              <li>                <a href="//blog.mozilla.com.tw/main" title="部落格">部落格</a>              </li>              <li>                <a href="//mozilla.com.tw/news/press/" title="Mozilla 新聞">Mozilla 新聞</a>              </li>              <li>                <a href="//blog.mozilla.com.tw/events-list" title="活動訊息">活動訊息</a>              </li>              <li>                <a href="//tech.mozilla.com.tw/" title="謀智台客">謀智台客</a>              </li>            </ul>          </div>        </li>        <li class="sitemap">          <h2>關於我們</h2>          <div>            <ul>              <li>                <a href="//mozilla.com.tw/about/manifesto/" title="Mozilla 宣言">Mozilla 宣言</a>              </li>              <li>                <a href="//mozilla.com.tw/about/space/" title="Mozilla Space">Mozilla Space</a>              </li>              <li>                <a href="//mozilla.com.tw/about/careers/" title="工作機會">工作機會</a>              </li>              <li>                <a href="//mozilla.com.tw/about/contact/" title="聯絡資訊">聯絡資訊</a>              </li>              <li>                <a href="//mozilla.org/en-US/" title="Mozilla (US)">Mozilla (US)</a>              </li>            </ul>          </div>        </li>        <!-- end of sitemap -->      </ul>    </div>    <!-- end of tabzilla-nav -->  </div>  <!-- end of tabzilla-content --></div><!-- end of tabzilla-panel -->';return b})(Tabzilla||{});